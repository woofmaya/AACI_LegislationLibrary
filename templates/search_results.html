{% extends "base_site" %}

{% set searchTerm = craft.app.request.getParam('q') %}

{% set assetResults = craft.assets.volume('resources').search(searchTerm).orderBy('score') %}
{% set entryResults = craft.entries.section('all_topics').search(searchTerm).orderBy('score') %}

{% block heading %} {{ entry.heading }}{% endblock %}

{% block main %}

	<section class="content-section">
    	<div class="container">
        	<div class="row">

				<div class="col-md-7 col-lg-8">
					<h3> Resources: </h3>
					{% if assetResults|length %}
						{% for asset in assetResults.all() %}
								<a href="{{ alias('@web/resources/' ~ asset.id) }}" target="_blank">{{ asset.title }}</a>
							<br>
						{% endfor %}
					{% else %}
						No resources matched your search.
					{% endif %}

					<br><br>
					<h3> Topics/Subtopics: </h3>
					{% if entryResults|length %}
						{% for entry in entryResults.all() %}
							<a href = "{{ entry.url }}" target="_blank">{{ entry.title }}</a>
							<br>
						{% endfor %}

					{% else %}
						No topics matched your search.
					{% endif %}
        </div>

    		</div>
    	</div>
    </section>


{% endblock %}
